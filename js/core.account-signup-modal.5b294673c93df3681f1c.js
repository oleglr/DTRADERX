(self.webpackChunk=self.webpackChunk||[]).push([[301],{23810:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var r=n(40841),a=n.n(r),i=n(44066),s=n(60216),o=n.n(s),c=n(32735),l=n(77395),u=n(57573),d=n(20374),p=n(58468),_=n(75672),f=function(e){var t=e.children;return c.createElement("div",{className:"signup-separator-container"},t)};f.Line=function(e){var t=e.is_invisible;return c.createElement("div",{className:a()("signup-separator-container__line",{"signup-separator-container__line--invisible":t})})};const m=f;var b=n(70747);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x={password:"",residence:"",email_consent:!1},S=function(e){var t=e.enableApp,n=e.isModalVisible,r=e.clients_country,s=e.onSignup,o=e.residence_list,_=e.isEuCountrySelected,f=c.useContext(u.PlatformContext).is_dashboard,v=w(c.useState(!1),2),h=v[0],E=v[1],S=w(c.useState(!0),2),C=S[0],O=S[1],A=w(c.useState(""),2),j=A[0],N=A[1],z=w(c.useState(""),2),P=z[0],k=z[1],T=w(c.useState(""),2),F=T[0],L=T[1],M=w(c.useState(!1),2),I=M[0],D=M[1];c.useEffect((function(){p.WS.wait("website_status","residence_list").then((function(){r&&o&&N((0,u.getLocation)(o,r,"text")),O(!1)}))}),[]);var B=function(e){e?E(e):(n(!1),t())};return c.createElement("div",{className:"account-signup"},C?c.createElement(l.Loading,{is_fullscreen:!1}):c.createElement(i.Formik,{initialValues:x,validate:function(e){return function(e,t){var n={};if((0,u.validLength)(e.password,{min:8,max:25})?(0,u.validPassword)(e.password)||(n.password=(0,u.getErrorMessages)().password()):n.password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.residence){var r=t.findIndex((function(t){return t.text.toLowerCase()===e.residence.toLowerCase()}));-1!==r&&"DISABLED"!==t[r].disabled||(n.residence=(0,d.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:u.website_name}))}else n.residence=!0;return n}(e,o)},onSubmit:function(e){var t=o.findIndex((function(t){return t.text.toLowerCase()===e.residence.toLowerCase()}));I||(e.email_consent=!0);var n=y(y({},e),{},{residence:o[t].value});s(n,B)},is_eu_resident:I,residence_list:o},(function(e){var t=e.isSubmitting,r=e.handleBlur,s=e.errors,p=e.handleChange,v=e.values,y=e.setFieldValue,w=e.setFieldTouched,E=e.touched;return c.createElement(i.Form,null,F?c.createElement("div",{className:"account-signup__password-selection"},c.createElement(l.Text,{as:"p",weight:"bold",className:"account-signup__heading",align:"center"},c.createElement(d.Localize,{i18n_default_text:"Keep your account secure with a password"})),c.createElement(i.Field,{name:"password"},(function(e){var t=e.field;return c.createElement(l.PasswordMeter,{input:P,has_error:!(!E.password||!s.password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},c.createElement(l.PasswordInput,g({},t,{className:"account-signup__password-field",label:(0,d.localize)("Create a password"),error:E.password&&s.password,required:!0,value:v.password,onBlur:r,onChange:function(e){var t,n=e.target;w("password",!0),n&&(t=n.value,k(t)),p(e)},input_id:"dt_core_account-signup-modal_account-signup-password-field"})))})),c.createElement(l.Text,{as:"p",size:"xxs",className:"account-signup__subtext",align:"center"},c.createElement(d.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),c.createElement(i.Field,{name:"email_consent"},(function(e){var t=e.field;return c.createElement(l.Checkbox,g({},t,{className:I?"account-signup__receive-update-checkbox":"account-signup__hidden-checkbox",onChange:function(){y("email_consent",!v.email_consent)},value:v.email_consent,label:(0,d.localize)("I want to receive updates on Deriv products, services, and events."),withTabIndex:"0"}))})),c.createElement(m,null),h?c.createElement(c.Fragment,null,c.createElement(l.Text,{as:"p",size:"xxs",color:"loss-danger",className:"account-signup__subtext account-signup__subtext--error",align:"center"},h),c.createElement("div",{className:"account-signup__error-wrapper"},c.createElement(l.Button,{secondary:!0,text:(0,d.localize)("Cancel"),type:"button",onClick:function(){return n(!1)}}),c.createElement(l.Button,{primary:!0,text:(0,d.localize)("Create new account"),type:"button",onClick:function(){return(0,u.redirectToSignUp)({is_dashboard:f})}}))):c.createElement(l.Button,{className:a()("account-signup__btn",{"account-signup__btn--disabled":!v.password||s.password||t}),id:"dt_core_account-signup-modal_submit-btn",type:"submit",is_disabled:!v.password||!!s.password||t,text:(0,d.localize)("Start trading"),primary:!0})):c.createElement(b.Z,{header_text:(0,d.localize)("Thanks for verifying your email"),class_prefix:"account-signup",errors:s,touched:E,setFieldTouched:w,setFieldValue:y,residence_list:o,default_value:j},c.createElement(l.Button,{className:a()("account-signup__btn",{"account-signup__btn--disabled":!v.residence||s.residence}),type:"button",is_disabled:!v.residence||!!s.residence,onClick:function(){!function(e){var t=e;if(L(t),t){var n=o.find((function(e){return e.text.toLowerCase()===t.toLowerCase()})).value;_(n)?D(!0):D(!1)}}(v.residence)},primary:!0,text:(0,d.localize)("Next")})))})))};S.propTypes={enableApp:o().func,onSignup:o().func,residence_list:o().array,isModalVisible:o().func};var C=function(e){var t=e.enableApp,n=e.disableApp,r=e.clients_country,a=e.is_loading,i=e.is_visible,s=e.is_logged_in,o=e.isEuCountrySelected,u=e.logout,d=e.onSignup,p=e.residence_list,_=e.toggleAccountSignupModal;return c.useEffect((function(){i&&s&&u()}),[i,s,u]),c.createElement(l.Dialog,{is_visible:i,disableApp:n,enableApp:t,is_loading:a||!p.length,is_mobile_full_width:!1,is_content_centered:!0},c.createElement(S,{clients_country:r,onSignup:d,residence_list:p,isModalVisible:_,isEuCountrySelected:o,enableApp:t}))};C.propTypes={clients_country:o().string,disableApp:o().func,enableApp:o().func,is_loading:o().bool,is_visible:o().bool,onSignup:o().func,residence_list:o().arrayOf(o().object)};const O=(0,_.$j)((function(e){var t=e.ui,n=e.client;return{is_visible:t.is_account_signup_modal_visible,toggleAccountSignupModal:t.toggleAccountSignupModal,enableApp:t.enableApp,disableApp:t.disableApp,is_loading:t.is_loading,onSignup:n.onSignup,is_logged_in:n.is_logged_in,residence_list:n.residence_list,clients_country:n.clients_country,isEuCountrySelected:n.isEuCountrySelected,logout:n.logout}}))(C)},70747:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(44066),a=n(60216),i=n.n(a),s=n(32735),o=n(77395),c=n(20374);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e){var t=e.class_prefix,n=void 0===t?"set-residence":t,a=e.children,i=e.default_value,u=e.header_text,d=e.errors,p=e.touched,_=e.setFieldTouched,f=e.setFieldValue,m=e.residence_list;return s.useEffect((function(){i&&(_("residence",!0),f("residence",i,!0))}),[]),s.createElement("div",{className:"".concat(n,"__residence-selection")},!!u&&s.createElement(o.Text,{as:"p",align:"center",weight:"bold",className:"".concat(n,"__heading")},u),s.createElement(o.Text,{as:"p",className:"".concat(n,"__").concat(u?"text":"heading")},(0,c.localize)("Where do you live?")),s.createElement(r.Field,{name:"residence"},(function(e){var t=e.field;return s.createElement(s.Fragment,null,s.createElement(o.DesktopWrapper,null,s.createElement(o.Autocomplete,l({},t,{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",className:"".concat(n,"__residence-field"),type:"text",label:(0,c.localize)("Choose country"),error:p.residence&&d.residence,required:!0,list_items:m,onItemSelection:function(e){var t=e.value,n=e.text;return f("residence",t?n:"",!0)}}))),s.createElement(o.MobileWrapper,null,s.createElement(o.SelectNative,{placeholder:(0,c.localize)("Please select"),label:(0,c.localize)("Choose country"),value:t.value,list_items:m,error:p.residence&&d.residence,required:!0,use_text:!0,onChange:function(e){_("residence",!0),f("residence",e.target.value,!0)}})))})),a)};u.propTypes={children:i().node,default_value:i().string,class_prefix:i().string,header_text:i().string,residence_list:i().arrayOf(i().object)};const d=u}}]);