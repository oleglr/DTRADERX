(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["reports"],{"./Modules/Reports/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Se});var o=n("mobx-react"),a=n("../../../node_modules/prop-types/index.js"),r=n.n(a),l=n("react"),i=n("react-router-dom"),c=n("@deriv/components"),s=n("@deriv/shared"),u=n("@deriv/translations"),m=n("./App/Components/Elements/ContentLoader/index.js"),_=n("./App/Components/Routes/helpers.js"),d=n("./Modules/Reports/Helpers/market-underlying.js"),p=function(e){var t=e.has_selected_date,n=e.component_icon,o=e.localized_message,a=e.localized_period_message;return l.createElement(l.Fragment,null,l.createElement("div",{className:"empty-trade-history"},l.createElement(c.Icon,{icon:n,className:"empty-trade-history__icon",color:"disabled",size:96}),l.createElement(c.Text,{size:"xs",align:"center",color:"disabled",className:"empty-trade-history__text"},t?a:o)))};p.propTypes={component_icon:r().string,has_selected_date:r().bool,localized_message:r().string,localized_period_message:r().string};const f=p;var y=n("../../../node_modules/classnames/index.js"),v=n.n(y),g=n("./Stores/connect.js"),b=n("./Constants/contract.js"),h=function(e){var t=e.contract_info,n=e.is_loading,o=e.server_time;if(!t)return l.createElement("div",null);var a=t.tick_count&&(0,s.getCurrentTick)(t);return l.createElement(c.ProgressSlider,{current_tick:a,expiry_time:t.date_expiry,getCardLabels:b.gk,is_loading:n,server_time:o,start_time:t.date_start,ticks_count:t.tick_count})};h.propTypes={contract_info:r().object,is_loading:r().bool,server_time:r().object};const E=(0,g.$j)((function(e){var t=e.common;return{is_loading:e.modules.portfolio.is_loading,server_time:t.server_time}}))(h);var C=function(e){return+e.replace(/,/g,"")>=0?"profit":"loss"};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,n,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return M(this,n)}}(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={movement:null,amount:0},t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.setState((function(){return{movement:e.amount>=t.state.amount?"profit":"loss",amount:e.amount}}))}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.currency,o=e.contract_info,a=e.is_footer,r=e.onClickSell,i=e.is_sell_requested,s=this.state.movement;return l.createElement("div",{className:"open-positions__indicative"},l.createElement("div",{className:"open-positions__indicative--amount"},l.createElement(c.Money,{amount:Math.abs(t),currency:n}),"no-resale"!==status&&0!==t&&l.createElement(l.Fragment,null,"profit"===s&&l.createElement(c.Icon,{icon:"IcProfit"}),"loss"===s&&l.createElement(c.Icon,{icon:"IcLoss"}))),l.createElement(c.DesktopWrapper,null,!a&&l.createElement(c.ContractCard.Sell,{contract_info:o,is_sell_requested:i,getCardLabels:b.gk,onClickSell:r})))}}])&&k(t.prototype,n),a}(l.PureComponent);z.propTypes={amount:r().number,currency:r().string,status:r().string,is_footer:r().bool,onClickSell:r().func};const D=(0,g.$j)((function(e){return{onClickSell:e.modules.portfolio.onClickSell}}))(z);var T=function(e){var t=e.icon,n=e.payload,o=e.show_description,a=e.should_show_multiplier,r=void 0===a||a,i="string"==typeof n.shortcode,u=(0,s.extractInfoFromShortcode)(n.shortcode);return i&&u?l.createElement("div",{className:"market-symbol-icon"},l.createElement("div",{className:"market-symbol-icon-name"},l.createElement(c.Popover,{classNameTarget:"market-symbol-icon__popover",classNameBubble:"market-symbol-icon__popover-bubble",alignment:"top",message:(0,d.lA)(u.underlying),is_bubble_hover_enabled:!0,disable_target_icon:!0},l.createElement(c.Icon,{icon:u.underlying?"IcUnderlying".concat(u.underlying):"IcUnknown",size:32})),o&&n.display_name),l.createElement("div",{className:"market-symbol-icon-category"},l.createElement(c.Popover,{classNameTarget:"category-type-icon__popover",classNameBubble:"category-type-icon__popover-bubble",alignment:"top",message:(0,d.ti)(u.category),is_bubble_hover_enabled:!0,disable_target_icon:!0},l.createElement(c.IconTradeTypes,{type:(0,s.isHighLow)({shortcode_info:u})?"".concat(u.category.toLowerCase(),"_barrier"):u.category.toLowerCase(),color:"brand"})),o&&u.category),r&&u.multiplier&&l.createElement("div",{className:"market-symbol-icon__multiplier"},"x",u.multiplier)):["deposit","hold","release","withdrawal","transfer"].includes(n.action_type)?l.createElement("div",{className:"market-symbol-icon"},"deposit"===n.action_type&&l.createElement(c.Icon,{icon:t||"IcCashierDeposit",size:32}),"withdrawal"===n.action_type&&l.createElement(c.Icon,{icon:"IcCashierWithdrawal",size:32}),"transfer"===n.action_type&&l.createElement(c.Icon,{icon:"IcAccountTransferColored",size:32}),("hold"===n.action_type||"release"===n.action_type)&&l.createElement(c.Icon,{icon:"IcCashierDp2p",size:32})):["adjustment"].includes(n.action_type)?l.createElement("div",{className:"market-symbol-icon"},l.createElement(c.Icon,{icon:"IcAdjustment",size:32})):l.createElement("svg",{width:"32",height:"32",className:"unknown-icon"},l.createElement("rect",{width:"32",height:"32"}))};T.propTypes={action:r().string,payload:r().object,show_description:r().bool,should_show_multiplier:r().bool};const j=T;var S=function(e){var t=e.value,n=e.children,o=C(t);return l.createElement("span",{className:"amount--".concat(o)},n)};S.propTypes={value:r().string};const I=S;var O=function(e){var t=e.currency;return l.createElement("div",{className:"currency__wrapper"},l.createElement(c.Text,{color:"colored-background",weight:"bold",size:"xxxs"},t))};O.propTypes={currency:r().string};const Y=O;var L=n("./App/Components/Elements/PositionsDrawer/PositionsDrawerCard/positions-drawer-card.jsx"),F=n("./templates/_common/components/loading.jsx"),P=function(e){var t=e.empty_message_component;return l.createElement(l.Fragment,null,e.is_empty&&l.createElement(t,{component_icon:e.component_icon,has_selected_date:e.has_selected_date,localized_message:e.localized_message,localized_period_message:e.localized_period_message}),e.is_loading&&l.createElement(F.Z,null))};P.propTypes={component_icon:r().string,empty_message_component:r().func,has_selected_date:r().bool,localized_message:r().string};const R=P;function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(o=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var W=function(e){return l.createElement(l.Fragment,null,e.is_empty?l.createElement(R,{is_empty:e.is_empty,empty_message_component:f,component_icon:e.component_icon,localized_message:(0,u.localize)("You have no open positions yet.")}):e.children)},$=function(e){var t,n=e.row,o=e.is_footer,a=e.columns_map,r=e.server_time,i=e.onClickCancel,u=e.onClickSell,m=e.measure;if(l.useEffect((function(){o||m()}),[null===(t=n.contract_info)||void 0===t?void 0:t.underlying,m,o]),o)return l.createElement(l.Fragment,null,l.createElement("div",{className:"open-positions__data-list-footer--content"},l.createElement("div",null,l.createElement(c.DataList.Cell,{row:n,column:a.purchase}),l.createElement(c.DataList.Cell,{row:n,column:a.payout})),l.createElement("div",null,l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:a.indicative}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:a.profit}))));var _=n.contract_info,p=n.contract_update,f=n.type,y=n.is_sell_requested,v=_.currency,g=_.status,h=_.date_expiry,E=_.date_start,C=(0,d.yu)(_.longcode),w=(0,s.getTimePercentage)(r,E,h)/100;return(0,s.isMultiplierContract)(f)?l.createElement(L.Z,{contract_info:_,contract_update:p,currency:v,is_multiplier:!0,is_link_disabled:!0,onClickCancel:i,onClickSell:u,server_time:r,status:g}):l.createElement(l.Fragment,null,l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:n,column:a.type}),l.createElement(c.ProgressBar,{label:C,value:w})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:n,column:a.reference}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:a.currency})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:n,column:a.purchase}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:a.indicative})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:n,column:a.payout}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:a.profit})),l.createElement("div",{className:"data-list__row-divider"}),l.createElement("div",{className:"data-list__row"},l.createElement(c.ContractCard.Sell,{contract_info:_,is_sell_requested:y,getCardLabels:b.gk,onClickSell:u})))},q=function(e){var t=e.className,n=e.columns,o=e.component_icon,a=e.currency,r=e.active_positions,i=e.is_loading,s=e.getRowAction,_=e.mobileRowRenderer,d=e.preloaderCheck,p=e.row_size,y=e.totals;return l.createElement(l.Fragment,null,i?l.createElement(R,{is_loading:i,empty_message_component:f,component_icon:o,localized_message:(0,u.localize)("You have no open positions yet.")}):a&&l.createElement("div",{className:"reports__content"},l.createElement(c.DesktopWrapper,null,l.createElement(W,{component_icon:o,is_empty:0===r.length},l.createElement(c.DataTable,{className:t,columns:n,preloaderCheck:d,footer:y,data_source:r,getRowAction:s,getRowSize:function(){return p},content_loader:m.Ro},l.createElement(R,{is_loading:i})))),l.createElement(c.MobileWrapper,null,l.createElement(W,{component_icon:o,is_empty:0===r.length},l.createElement(c.DataList,{className:t,data_source:r,footer:y,rowRenderer:_,getRowAction:s,row_gap:8},l.createElement(R,{is_loading:i}))))))},V=function(e){return e.is_unsupported?{component:l.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[l.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:(0,s.urlFor)("user/portfoliows",{legacy:!0})})]})}:(0,_.uT)(e.id)},H=function(e){return isNaN(e.purchase)||!e.purchase},Z=function(e){var t=e.active_positions,n=e.component_icon,o=e.currency,a=e.error,r=e.getPositionById,i=e.is_loading,m=e.is_multiplier,_=e.NotificationMessages,d=e.onClickCancel,p=e.onClickSell,f=e.onMount,y=e.onUnmount,g=e.server_time,h=B(l.useState(m?1:0),2),C=h[0],w=h[1],k=B(l.useState(!1),2),N=k[0],M=k[1],x=(0,c.usePrevious)(t);l.useEffect((function(){return(0,s.isMobile)()||f(),z(),function(){(0,s.isMobile)()||y()}}),[]),l.useEffect((function(){z(x)}),[x]);var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];N||t===e||M(t.some((function(e){var t;return(0,s.isMultiplierContract)(null===(t=e.contract_info)||void 0===t?void 0:t.contract_type)})))};if(a)return l.createElement("p",null,a);var T=N&&1===C,S=t.filter((function(e){return!e.contract_info||(T?(0,s.isMultiplierContract)(e.contract_info.contract_type):!(0,s.isMultiplierContract)(e.contract_info.contract_type))})),I=function(e,t){var n;if(t){var o=0,a=0,r=0,l=0,i=0;e.forEach((function(e){r+=+e.contract_info.buy_price,l+=+e.contract_info.bid_price,i+=+e.purchase,e.contract_info&&(a+=(0,s.getTotalProfit)(e.contract_info),e.contract_info.cancellation&&(o+=e.contract_info.cancellation.ask_price||0))})),n={contract_info:{profit:a,buy_price:r,bid_price:l},purchase:i},o>0&&(n.contract_info.cancellation={ask_price:o})}else{var c=0,u=0,m=0,_=0;e.forEach((function(e){c+=+e.indicative,u+=+e.purchase,m+=e.profit_loss,_+=e.payout})),n={indicative:c,purchase:u,profit_loss:m,payout:_}}return n}(S,T),O=T?function(e){var t=e.currency,n=e.onClickCancel,o=e.onClickSell,a=e.getPositionById,r=e.server_time;return[{title:(0,s.isMobile)()?"":(0,u.localize)("Type"),col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?(0,u.localize)("Total"):l.createElement(j,{action:t,key:n.id,payload:n.contract_info,should_show_multiplier:!1})}},{title:(0,u.localize)("Multiplier"),col_index:"multiplier",renderCellContent:function(e){var t=e.row_obj;return t.contract_info&&t.contract_info.multiplier?"x".concat(t.contract_info.multiplier):""}},{title:(0,u.localize)("Currency"),col_index:"currency",renderCellContent:function(e){var t,n=e.row_obj;return l.createElement(Y,{currency:(0,s.getCurrencyDisplayCode)(null===(t=n.contract_info)||void 0===t?void 0:t.currency)})}},{title:(0,u.localize)("Stake"),col_index:"buy_price",renderCellContent:function(e){var n=e.row_obj;if(n.contract_info){var o=(n.contract_info.cancellation||{}).ask_price,a=void 0===o?0:o;return l.createElement(c.Money,{amount:n.contract_info.buy_price-a,currency:t})}return""}},{title:(0,u.localize)("Deal cancel. fee"),col_index:"cancellation",renderCellContent:function(e){var n=e.row_obj;return n.contract_info&&n.contract_info.underlying?(0,s.shouldShowCancellation)(n.contract_info.underlying)?n.contract_info.cancellation?l.createElement(c.Money,{amount:n.contract_info.cancellation.ask_price,currency:t}):"-":(0,u.localize)("N/A"):"-"}},{title:(0,s.isMobile)()?l.createElement(u.Localize,{i18n_default_text:"Total buy price"}):l.createElement(u.Localize,{i18n_default_text:"Buy price"}),col_index:"purchase",renderCellContent:function(e){var n=e.cell_value;return l.createElement(c.Money,{amount:n,currency:t})}},{title:l.createElement(u.Localize,{i18n_default_text:"Take profit<0 />Stop loss",components:[l.createElement("br",{key:0})]}),col_index:"limit_order",renderCellContent:function(e){var n,o=e.row_obj;if(e.is_footer)return"";var a=(null===(n=o.contract_info)||void 0===n?void 0:n.limit_order)||{},r=a.take_profit,i=a.stop_loss;return l.createElement(l.Fragment,null,l.createElement("div",null,null!=r&&r.order_amount?l.createElement(c.Money,{has_sign:!0,amount:r.order_amount,currency:t}):"-"),l.createElement("div",null,null!=i&&i.order_amount?l.createElement(c.Money,{has_sign:!0,amount:i.order_amount,currency:t}):"-"))}},{title:(0,u.localize)("Current stake"),col_index:"bid_price",renderCellContent:function(e){var n=e.row_obj;if(e.is_footer)return"";if(!n.contract_info||!n.contract_info.bid_price)return"-";var o=(0,s.getTotalProfit)(n.contract_info);return l.createElement("div",{className:v()("open-positions__bid_price",{"open-positions__bid_price--negative":o<0,"open-positions__bid_price--positive":o>0})},l.createElement(c.Money,{amount:n.contract_info.bid_price,currency:t}))}},{title:(0,s.isMobile)()?l.createElement(u.Localize,{i18n_default_text:"Total profit/loss"}):l.createElement(u.Localize,{i18n_default_text:"Total<0 />profit/loss",components:[l.createElement("br",{key:0})]}),col_index:"profit",renderCellContent:function(e){var n=e.row_obj;if(!n.contract_info||!n.contract_info.profit)return null;var o=(0,s.getTotalProfit)(n.contract_info);return l.createElement("div",{className:v()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},l.createElement(c.Money,{amount:Math.abs(o),currency:t}),l.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?l.createElement(c.Icon,{icon:"IcProfit"}):l.createElement(c.Icon,{icon:"IcLoss"})))}},{title:(0,u.localize)("Action"),col_index:"action",renderCellContent:function(e){var t=e.row_obj;if(e.is_footer)return l.createElement("div",{className:"open-positions__row-action"});var i=t.contract_info,s=(a(i.contract_id)||{}).is_sell_requested;return l.createElement("div",{className:"open-positions__row-action"},l.createElement(c.ContractCard.MultiplierCloseActions,{contract_info:i,getCardLabels:b.gk,is_sell_requested:s,onClickCancel:n,onClickSell:o,server_time:r}))}}]}({currency:o,onClickCancel:d,onClickSell:p,getPositionById:r,server_time:g}):function(e){return[{title:(0,s.isMobile)()?"":(0,u.localize)("Type"),col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?(0,u.localize)("Total"):l.createElement(j,{action:t,key:n.id,payload:n.contract_info})}},{title:(0,u.localize)("Ref. ID"),col_index:"reference"},{title:(0,u.localize)("Currency"),col_index:"currency",renderCellContent:function(e){var t,n=e.row_obj;return l.createElement(Y,{currency:(0,s.getCurrencyDisplayCode)(null===(t=n.contract_info)||void 0===t?void 0:t.currency)})}},{title:(0,u.localize)("Buy price"),col_index:"purchase",renderCellContent:function(t){var n=t.cell_value;return l.createElement(c.Money,{amount:n,currency:e})}},{title:(0,u.localize)("Payout limit"),col_index:"payout",renderCellContent:function(t){var n=t.cell_value;return n?l.createElement(c.Money,{amount:n,currency:e}):l.createElement("span",null,"-")}},{title:(0,u.localize)("Indicative profit/loss"),col_index:"profit",renderCellContent:function(t){var n=t.row_obj;if(n.profit_loss||n.contract_info&&n.contract_info.profit){var o=n.profit_loss||n.contract_info.profit;return l.createElement("div",{className:v()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},l.createElement(c.Money,{amount:Math.abs(o),currency:e}),l.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?l.createElement(c.Icon,{icon:"IcProfit"}):l.createElement(c.Icon,{icon:"IcLoss"})))}}},{title:(0,u.localize)("Indicative price"),col_index:"indicative",renderCellContent:function(t){var n=t.cell_value,o=t.row_obj,a=t.is_footer;return l.createElement(D,{amount:+n,currency:e,contract_info:o.contract_info,is_sell_requested:o.is_sell_requested,is_footer:a})}},{title:(0,u.localize)("Remaining time"),col_index:"id",renderCellContent:function(e){var t=e.row_obj;return l.createElement(E,{contract_info:t.contract_info})}}]}(o),L=O.reduce((function(e,t){return e[t.col_index]=t,e}),{}),F={active_positions:S,component_icon:n,currency:o,is_loading:i,mobileRowRenderer:function(e){return l.createElement($,A({},e,{columns_map:L,server_time:g,onClickCancel:d,onClickSell:p}))},getRowAction:V,preloaderCheck:H,totals:I};return l.createElement(l.Fragment,null,l.createElement(_,null),N?l.createElement(c.Tabs,{active_index:C,className:"open-positions",onTabItemClick:function(e){return w(e)},top:!0,header_fit_content:!(0,s.isMobile)()},l.createElement("div",{label:(0,u.localize)("Options")},l.createElement(q,A({className:"open-positions",columns:O},F,{row_size:(0,s.isMobile)()?5:63}))),l.createElement("div",{label:(0,u.localize)("Multipliers")},l.createElement(q,A({className:"open-positions-multiplier open-positions",is_multiplier_tab:!0,columns:O,row_size:(0,s.isMobile)()?3:68},F)))):l.createElement(q,A({className:"open-positions",columns:O},F,{row_size:(0,s.isMobile)()?5:63})))};Z.propTypes={active_positions:o.PropTypes.arrayOrObservableArray,component_icon:r().string,currency:r().string,error:r().string,getPositionById:r().func,is_loading:r().bool,is_multiplier:r().bool,NotificationMessages:r().func,onClickCancel:r().func,onClickSell:r().func,onMount:r().func,onUnmount:r().func,server_time:r().object};const G=(0,g.$j)((function(e){var t=e.modules,n=e.client,o=e.common,a=e.ui;return{active_positions:t.portfolio.active_positions,currency:n.currency,error:t.portfolio.error,getPositionById:t.portfolio.getPositionById,is_loading:t.portfolio.is_loading,is_multiplier:t.trade.is_multiplier,NotificationMessages:a.notification_messages_ui,onClickCancel:t.portfolio.onClickCancel,onClickSell:t.portfolio.onClickSell,onMount:t.portfolio.onMount,onUnmount:t.portfolio.onUnmount,server_time:o.server_time}}))((0,i.withRouter)(Z));var K=n("react-router"),J=n("../../../node_modules/react-loadable/lib/index.js"),Q=n.n(J);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(o=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var te=function(e){var t=e.id,n=e.className,o=e.selected_value,a=e.value,r=e.label,i=e.onChange;return l.createElement("label",{htmlFor:t,className:v()("composite-calendar-modal__radio",n,{"composite-calendar-modal__radio--selected":o===a}),onClick:function(){return i({label:r,value:a})}},l.createElement("input",{className:"composite-calendar-modal__radio-input",id:t,type:"radio",value:a}),l.createElement("span",{className:v()("composite-calendar-modal__radio-circle",{"composite-calendar-modal__radio-circle--selected":o===a})}),l.createElement(c.Text,{as:"p",color:"prominent",size:"xs",line_height:"unset",weight:o===a?"bold":"normal"},r))},ne="custom",oe=l.memo((function(e){var t=e.input_date_range,n=e.current_focus,o=e.duration_list,a=e.onChange,r=e.setCurrentFocus,i=t||o.find((function(e){return"all_time"===e.value})),m=X(l.useState(_&&(0,s.toMoment)(_).format("DD MMM YYYY")),2),_=m[0],d=m[1],p=X(l.useState(f&&(0,s.toMoment)(f).format("DD MMM YYYY")),2),f=p[0],y=p[1],v=X(l.useState(!1),2),g=v[0],b=v[1],h=X(l.useState(i),2),E=h[0],C=h[1],w=X(l.useState(i),2),k=w[0],N=w[1],M=function(e,t){var n=e.duration;a({from:t||n?(0,s.toMoment)().startOf("day").subtract(n,"day").add(1,"s").unix():null,to:(0,s.toMoment)().endOf("day").unix(),is_batch:!0},{date_range:e})},x=function(e,t){var n,o;N({value:ne}),"from"===t&&d(null!==(n=e.target)&&void 0!==n&&n.value?(0,s.toMoment)(e.target.value).format("DD MMM YYYY"):""),"to"===t&&y(null!==(o=e.target)&&void 0!==o&&o.value?(0,s.toMoment)(e.target.value).format("DD MMM YYYY"):"")},z=function(e){N(o.find((function(t){return e&&t.value===e.value}))||e)},D=(0,s.toMoment)().format("YYYY-MM-DD"),T=f?(0,s.toMoment)(f,"DD MMM YYYY").format("YYYY-MM-DD"):D,j=_&&(0,s.toMoment)(_,"DD MMM YYYY").format("YYYY-MM-DD");return l.createElement(l.Fragment,null,l.createElement("div",{className:"composite-calendar__input-fields composite-calendar__input-fields--fill"},l.createElement(c.InputField,{id:"dt_calendar_input",current_focus:n,is_read_only:!0,icon:function(){return l.createElement(c.Icon,{icon:"IcCalendarDatefrom",className:"inline-icon"})},onClick:function(){N(E),b(!0)},setCurrentFocus:r,value:E.label})),l.createElement(c.MobileDialog,{portal_element_id:"modal_root",title:(0,u.localize)("Please select duration"),visible:g,has_content_scroll:!0,onClose:function(){return b(!1)},content_height_offset:"94px",footer:l.createElement("div",{className:"composite-calendar-modal__actions"},l.createElement(c.Button,{className:"composite-calendar-modal__actions__cancel",text:(0,u.localize)("Cancel"),onClick:function(){return b(!1)},has_effect:!0,secondary:!0,large:!0}),l.createElement(c.Button,{className:"composite-calendar-modal__actions__ok",text:(0,u.localize)("OK"),onClick:function(){k.onClick?M(k):k.value===ne&&function(){var e=(0,s.toMoment)().format("DD MMM YYYY"),t=_||f||e,n=f||e,o=Object.assign(k,{label:"".concat(t," - ").concat(n)});a({from:(0,s.toMoment)(t,"DD MMM YYYY").startOf("day").add(1,"s").unix(),to:(0,s.toMoment)(n,"DD MMM YYYY").endOf("day").unix(),is_batch:!0},{date_range:o})}(),C(k),b(!1)},has_effect:!0,primary:!0,large:!0}))},l.createElement("div",{className:"composite-calendar-modal"},l.createElement("div",{className:"composite-calendar-modal__radio-group"},o.map((function(e){return l.createElement(te,{id:"composite-calendar-modal__radio__".concat(e.value),key:e.value,value:e.value,label:e.label,selected_value:k.value,onChange:z})}))),l.createElement("div",{className:"composite-calendar-modal__custom"},l.createElement(te,{id:"composite-calendar-modal__custom-radio",className:"composite-calendar-modal__custom-radio",value:ne,label:(0,u.localize)("Custom"),selected_value:k.value,onChange:z}),l.createElement("div",{className:"composite-calendar-modal__custom-date-range"},l.createElement(c.DatePicker,{className:"composite-calendar-modal__custom-date-range-start-date",is_nativepicker:!0,placeholder:(0,u.localize)("Start date"),value:_,max_date:T,onChange:function(e){return x(e,"from")}}),l.createElement(c.DatePicker,{className:"composite-calendar-modal__custom-date-range-end-date",is_nativepicker:!0,placeholder:(0,u.localize)("End date"),value:f,max_date:D,min_date:j,onChange:function(e){return x(e,"to")}}))),l.createElement(c.Button,{className:"composite-calendar-modal__actions-today",text:(0,u.localize)("Back to today"),onClick:function(){var e={duration:0,label:(0,u.localize)("Today")};M(e,!0),C(e),N(e),b(!1)},has_effect:!0,tertiary:!0,large:!0}))))}));oe.propTypes={current_focus:r().string,duration_list:r().array,from:r().number,onChange:r().func,setCurrentFocus:r().func,to:r().number};const ae=oe;var re=function(e){var t=e.onClick,n=e.is_active,o=e.label;return l.createElement("li",{className:v()({"composite-calendar__prepopulated-list--is-active":n}),onClick:t},o)};re.propTypes={label:r().oneOfType([r().func,r().node,r().array]),is_active:r().bool,onClick:r().func};const le=re;function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var ce=function(e){var t=e.items,n=e.from,o=e.to;return l.createElement("ul",{className:"composite-calendar__prepopulated-list"},t.map((function(e){var t=e.duration,a=function(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["duration"]),r=function(e,t,n){return 0===n?(0,s.toMoment)().endOf("day").unix()===t&&null===e:Math.ceil(t/86400)-Math.ceil(e/86400)===n}(n,o,t);return l.createElement(le,ie({key:t,is_active:r},a))})))};ce.propTypes={items:r().array};const se=ce;var ue=function(e){var t=e.onClick;return l.createElement(c.Icon,{onClick:t,icon:"IcCalendarDatefrom",className:"inline-icon"})};ue.propTypes={onClick:r().func};const me=ue;function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(o=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var fe=Q()({loader:function(){return n.e("two-month-picker").then(n.bind(n,"./App/Components/Form/CompositeCalendar/two-month-picker.jsx"))},loading:function(){return null},render:function(e,t){var n=e.default;return l.createElement(n,t)}}),ye=function(e){var t=e.current_focus,n=e.onChange,o=e.setCurrentFocus,a=e.to,r=e.from,i=de(l.useState(!1),2),m=i[0],_=i[1],d=de(l.useState(!1),2),p=d[0],f=d[1],y=de(l.useState([{value:"all_time",label:(0,u.localize)("All time"),onClick:function(){return b()},duration:0},{value:"last_7_days",label:(0,u.localize)("Last 7 days"),onClick:function(){return b(7)},duration:7},{value:"last_30_days",label:(0,u.localize)("Last 30 days"),onClick:function(){return b(30)},duration:30},{value:"last_60_days",label:(0,u.localize)("Last 60 days"),onClick:function(){return b(60)},duration:60},{value:"last_quarter",label:(0,u.localize)("Last quarter"),onClick:function(){return b(90)},duration:90}]),1)[0],v=l.useRef();(0,c.useOnClickOutside)(v,(function(e){e.stopPropagation(),e.preventDefault(),h()}));var g,b=function(e){h(),w({from:e?(0,s.toMoment)().startOf("day").subtract(e,"day").add(1,"s").unix():null,to:(0,s.toMoment)().endOf("day").unix(),is_batch:!0})},h=function(){f(!1),_(!1)},E=function(e){"from"===e&&f(!0),"to"===e&&_(!0)},C=function(e,t){k(e,t),h()},w=function(e){n(e)},k=function(e,t){w(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))};return l.createElement(l.Fragment,null,l.createElement(c.DesktopWrapper,null,l.createElement("div",{id:"dt_composite_calendar_inputs",className:"composite-calendar__input-fields"},l.createElement(c.InputField,{id:"dt_calendar_input_from",current_focus:t,is_read_only:!0,placeholder:(0,u.localize)("Date from"),icon:me,onClick:function(){return E("from")},setCurrentFocus:o,value:(g=(0,s.epochToMoment)(r),r?g.format("MMM, DD YYYY"):"")}),l.createElement(c.InputField,{id:"dt_calendar_input_to",current_focus:t,is_read_only:!0,placeholder:(0,u.localize)("Date to"),icon:me,onClick:function(){return E("to")},setCurrentFocus:o,value:function(){var e=(0,s.epochToMoment)(a);return 0===(0,s.daysFromTodayTo)(e)?(0,u.localize)("Today"):e.format("MMM, DD YYYY")}()})),m&&l.createElement("div",{className:"composite-calendar",ref:v},l.createElement(se,{from:r,to:a,items:y}),l.createElement(fe,{value:a,onChange:function(e){C("to",(0,s.epochToMoment)(e).endOf("day").unix())},isPeriodDisabled:function(e){return e+1<=r||e>(0,s.toMoment)().endOf("day").unix()}})),p&&l.createElement("div",{className:"composite-calendar",ref:v},l.createElement(se,{from:r,to:a,items:y}),l.createElement(fe,{value:r,onChange:function(e){C("from",e),h()},isPeriodDisabled:function(e){return e-1>=a}}))),l.createElement(c.MobileWrapper,null,l.createElement(ae,_e({duration_list:y},e))))};ye.displayName="CompositeCalendar",ye.propTypes={current_focus:r().string,from:r().number,onChange:r().func,setCurrentFocus:r().func,to:r().number};const ve=l.memo((0,g.$j)((function(e){var t=e.ui;return{current_focus:t.current_focus,setCurrentFocus:t.setCurrentFocus}}))(ye));var ge=n("./Constants/index.js"),be=function(e){var t=e.filter_component,n=e.className,o=e.optional_component,a=e.is_statement;return l.createElement("div",{className:v()("reports__meta",n)},o,t&&l.createElement("div",{className:v()("reports__meta-filter",{"reports__meta-filter--statement":a})},t))},he=function(e){return(0,ge.NC)()[(0,s.extractInfoFromShortcode)(e.shortcode).category.toUpperCase()]&&!(0,s.isForwardStarting)(e.shortcode,e.purchase_time_unix)?(0,_.uT)(e.contract_id):{component:l.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[l.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:(0,s.urlFor)("user/profit_tablews",{legacy:!0})})]})}},Ee=function(e){var t=e.component_icon,n=e.currency,o=e.data,a=e.date_from,r=e.date_to,i=e.error,_=e.filtered_date_range,p=e.is_empty,y=e.is_loading,g=e.is_switching,b=e.handleDateChange,h=e.handleScroll,E=e.has_selected_date,C=e.onMount,w=e.onUnmount,k=e.totals;if(l.useEffect((function(){return C(),function(){w()}}),[]),i)return l.createElement("p",null,i);var N=l.createElement(ve,{input_date_range:_,onChange:b,from:a,to:r}),M=function(e,t){return[{key:"icon",title:(0,s.isMobile)()?"":(0,u.localize)("Type"),col_index:"action_type",renderCellContent:function(e){var n=e.cell_value,o=e.row_obj;return e.is_footer?(0,u.localize)("Profit/loss on the last {{item_count}} contracts",{item_count:t}):l.createElement(j,{action:n,key:o.transaction_id,payload:o})}},{title:(0,u.localize)("Ref. ID"),col_index:"transaction_id"},{title:(0,u.localize)("Currency"),col_index:"currency",renderCellContent:function(t){return t.is_footer?"":l.createElement(Y,{currency:(0,s.getCurrencyDisplayCode)(e)})}},{title:(0,u.localize)("Buy time"),col_index:"purchase_time",renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":l.createElement("span",null,t," GMT")}},{title:(0,u.localize)("Buy price"),col_index:"buy_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":l.createElement(c.Money,{amount:n,currency:e})}},{title:(0,u.localize)("Sell time"),col_index:"sell_time",renderHeader:function(e){var t=e.title;return l.createElement("span",null,t)},renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":l.createElement("span",null,t," GMT")}},{title:(0,u.localize)("Sell price"),col_index:"sell_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":l.createElement(c.Money,{amount:n,currency:e})}},{title:(0,u.localize)("Profit / Loss"),col_index:"profit_loss",renderCellContent:function(t){var n=t.cell_value;return l.createElement(I,{value:n},l.createElement(c.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}}]}(n,o.length),x=M.reduce((function(e,t){return e[t.col_index]=t,e}),{});return l.createElement(l.Fragment,null,l.createElement(be,{filter_component:N,className:"profit-table__filter"}),g?l.createElement(R,{is_loading:!0}):l.createElement(l.Fragment,null,0===o.length||p?l.createElement(R,{is_loading:y,has_selected_date:E,is_empty:p,empty_message_component:f,component_icon:t,localized_message:(0,u.localize)("You have no trading activity yet."),localized_period_message:(0,u.localize)("You've made no transactions of this type during this period.")}):l.createElement("div",{className:"reports__content"},l.createElement(c.DesktopWrapper,null,l.createElement(c.DataTable,{className:"profit-table",data_source:o,columns:M,onScroll:h,footer:k,is_empty:p,getRowAction:he,getRowSize:function(){return 63},content_loader:m.Ro},l.createElement(R,{is_loading:y}))),l.createElement(c.MobileWrapper,null,l.createElement(c.DataList,{className:"profit-table",data_source:o,rowRenderer:function(e){var t=e.row,n=e.is_footer,o=(0,d.yu)(t.longcode,t.shortcode),a="duration-type__".concat(o.toLowerCase());return n?l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:x.action_type,is_footer:n}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:x.profit_loss,is_footer:n})):l.createElement(l.Fragment,null,l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:x.action_type}),l.createElement("div",{className:v()("duration-type",a)},l.createElement("div",{className:v()("duration-type__background","".concat(a,"__background"))}),l.createElement("span",{className:"".concat(a,"__label")},(0,u.localize)(o)))),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:x.transaction_id}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:x.currency})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:x.purchase_time}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:x.buy_price})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:x.sell_time}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:x.sell_price})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:x.profit_loss})))},getRowAction:he,onScroll:h,footer:k,row_gap:8},l.createElement(R,{is_loading:y}))))))};Ee.propTypes={component_icon:r().string,currency:r().string,data:o.PropTypes.arrayOrObservableArray,date_from:r().number,date_to:r().number,error:r().string,filtered_date_range:r().object,is_empty:r().bool,is_loading:r().bool,is_switching:r().bool,handleDateChange:r().func,handleScroll:r().func,has_selected_date:r().bool,onMount:r().func,onUnmount:r().func,totals:r().object};const Ce=(0,g.$j)((function(e){var t=e.modules,n=e.client;return{currency:n.currency,data:t.profit_table.data,date_from:t.profit_table.date_from,date_to:t.profit_table.date_to,error:t.profit_table.error,filtered_date_range:t.profit_table.filtered_date_range,is_empty:t.profit_table.is_empty,is_loading:t.profit_table.is_loading,is_switching:n.is_switching,handleDateChange:t.profit_table.handleDateChange,handleScroll:t.profit_table.handleScroll,has_selected_date:t.profit_table.has_selected_date,onMount:t.profit_table.onMount,onUnmount:t.profit_table.onUnmount,totals:t.profit_table.totals}}))((0,K.withRouter)(Ee));var we=function(e){var t=e.account_statistics,n=e.currency;return l.createElement("div",{className:"statement__account-statistics"},l.createElement("div",{className:"statement__account-statistics-item"},l.createElement("div",{className:"statement__account-statistics--is-rectangle"},l.createElement(c.Text,{color:"less-prominent",className:"statement__account-statistics-title"},(0,u.localize)("Total deposits")," ",l.createElement(c.MobileWrapper,null," (",n,") ")),l.createElement(c.Text,{color:"prominent",weight:"bold",align:"center",className:"statement__account-statistics-amount"},l.createElement(c.Money,{amount:t.total_deposits,currency:n})))),l.createElement("div",{className:"statement__account-statistics-item statement__account-statistics-total-withdrawal"},l.createElement("div",{className:"statement__account-statistics--is-rectangle"},l.createElement(c.Text,{color:"less-prominent",className:"statement__account-statistics-title"},(0,u.localize)("Total withdrawals")," ",l.createElement(c.MobileWrapper,null," (",n,") ")),l.createElement(c.Text,{color:"prominent",weight:"bold",align:"center",className:"statement__account-statistics-amount"},l.createElement(c.Money,{amount:t.total_withdrawals,currency:n})))),l.createElement("div",{className:"statement__account-statistics-item"},l.createElement("div",{className:"statement__account-statistics--is-rectangle"},l.createElement(c.Text,{color:"less-prominent",className:"statement__account-statistics-title"},(0,u.localize)("Net deposits")," ",l.createElement(c.MobileWrapper,null," (",n,") ")),l.createElement(c.Text,{color:"prominent",weight:"bold",align:"center",className:"statement__account-statistics-amount"},l.createElement(c.Money,{amount:t.total_deposits-t.total_withdrawals,currency:n})))))};we.propTypes={account_statistics:r().object,currency:r().string};const ke=(0,g.$j)((function(e){var t=e.modules,n=e.client;return{account_statistics:t.statement.account_statistics,currency:n.currency}}))(we);var Ne=function(e){var t=e.action_type,n=e.date_from,o=e.date_to,a=e.handleFilterChange,r=e.handleDateChange,i=e.filtered_date_range,s=[{text:(0,u.localize)("All transactions"),value:"all"},{text:(0,u.localize)("Buy"),value:"buy"},{text:(0,u.localize)("Sell"),value:"sell"},{text:(0,u.localize)("Deposit"),value:"deposit"},{text:(0,u.localize)("Withdrawal"),value:"withdrawal"},{text:(0,u.localize)("Transfer"),value:"transfer"}];return l.createElement(l.Fragment,null,l.createElement(ve,{input_date_range:i,onChange:r,from:n,to:o}),l.createElement(c.FilterDropdown,{dropdown_display_className:"dc-dropdown__display--has-suffix-icon",filter_list:s,handleFilterChange:a,initial_selected_filter:t}))};Ne.propTypes={action_type:r().string,date_from:r().number,date_to:r().number,filtered_date_range:r().object,handleDateChange:r().func,handleFilterChange:r().func,suffix_icon:r().string};const Me=(0,g.$j)((function(e){var t=e.modules;return{action_type:t.statement.action_type,data:t.statement.data,date_from:t.statement.date_from,date_to:t.statement.date_to,filtered_date_range:t.statement.filtered_date_range,handleDateChange:t.statement.handleDateChange,handleFilterChange:t.statement.handleFilterChange}}))(Ne);var xe=function(e){var t=e.message,n=void 0===t?"":t,o=/:\s([0-9a-zA-Z]+.{25,34})/gm.exec(n.split(/,\s/)[1]),a=null==o?void 0:o[1],r=[n];if(a){var i=n.split(/,\s/);r=i.map((function(e,t){return t!==i.length-1?"".concat(e,", "):e}))}return l.createElement(c.Text,{as:"div",size:"xs",className:"statement__row--detail-text",align:"center"},r.map((function(e,t){return l.createElement("div",{key:e},e,a&&t===r.length-1&&l.createElement(c.Clipboard,{text_copy:a,popoverAlignment:"top"}))})))},ze=function(e){var t,n;return e.id&&["buy","sell"].includes(e.action_type)?n=(0,ge.NC)()[(0,s.extractInfoFromShortcode)(e.shortcode).category.toUpperCase()]&&!(0,s.isForwardStarting)(e.shortcode,e.purchase_time||e.transaction_time)?(0,_.uT)(e.id):{component:l.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[l.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:(0,s.urlFor)("user/statementws",{legacy:!0})})]})}:"withdrawal"===e.action_type?n=e.withdrawal_details&&e.longcode?{message:"".concat(e.withdrawal_details," ").concat(e.longcode)}:{message:e.desc}:e.desc&&["deposit","transfer","adjustment","hold","release"].includes(e.action_type)&&(n={message:e.desc}),null!==(t=n)&&void 0!==t&&t.message&&(n.component=l.createElement(xe,{message:n.message})),n},De=function(e){var t=e.account_statistics,n=e.action_type,o=e.component_icon,a=e.currency,r=e.data,i=e.date_from,_=e.date_to,d=e.error,p=e.filtered_date_range,y=e.handleDateChange,v=e.handleFilterChange,g=e.handleScroll,b=e.has_selected_date,h=e.is_empty,E=e.is_loading,w=e.is_mx_mlt,k=e.is_switching,N=e.is_virtual,M=e.onMount,x=e.onUnmount;if(l.useEffect((function(){return M(),function(){x()}}),[]),d)return l.createElement("p",null,d);var z=function(e){return[{key:"icon",title:(0,s.isMobile)()?"":(0,u.localize)("Type"),col_index:"icon",renderCellContent:function(e){var t=e.cell_value,n=e.passthrough,o=e.row_obj,a=n.isTopUp(o)?"icCashierTopUp":null;return l.createElement(j,{action:t,icon:a,key:o.transaction_id,payload:o})}},{title:(0,u.localize)("Ref. ID"),col_index:"refid"},{title:(0,u.localize)("Currency"),col_index:"currency",renderCellContent:function(){return l.createElement(Y,{currency:(0,s.getCurrencyDisplayCode)(e)})}},{title:(0,u.localize)("Transaction time"),col_index:"date",renderCellContent:function(e){var t=e.cell_value;return l.createElement("span",null,t," GMT")}},{key:"mode",title:(0,u.localize)("Transaction"),col_index:"action_type",renderCellContent:function(e){var t,n,o=e.cell_value,a=e.passthrough,r=e.row_obj;return l.createElement(c.Label,{mode:(t=o,n={buy:"success",deposit:"success",hold:"warn",release:"success",sell:"danger",withdrawal:"info",default:"default",adjustment:"adjustment",transfer:"transfer"},Object.keys(n).find((function(e){return e===t}))?n[t]:n.default)},a.isTopUp(r)&&(0,u.localize)("Top up")||r.action)}},{title:(0,u.localize)("Credit/Debit"),col_index:"amount",renderCellContent:function(t){var n=t.cell_value;return l.createElement("div",{className:"amount--".concat(C(n))},l.createElement(c.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}},{title:(0,u.localize)("Balance"),col_index:"balance",renderCellContent:function(t){var n=t.cell_value;return l.createElement(c.Money,{amount:n.replace(/[,]+/g,""),currency:e})}}]}(a),D=z.reduce((function(e,t){return e[t.col_index]=t,e}),{});return l.createElement(l.Fragment,null,l.createElement(be,{className:w?void 0:"reports__meta--statement",filter_component:l.createElement(Me,{action_type:n,date_from:i,date_to:_,handleDateChange:y,handleFilterChange:v,filtered_date_range:p}),is_statement:!0,optional_component:!k&&w&&l.createElement(ke,{account_statistics:t,currency:a})}),k?l.createElement(R,{is_loading:!0}):l.createElement(l.Fragment,null,0===r.length||h?l.createElement(R,{is_loading:E,has_selected_date:b,is_empty:h,empty_message_component:f,component_icon:o,localized_message:(0,u.localize)("You have no transactions yet."),localized_period_message:(0,u.localize)("You've made no transactions of this type during this period.")}):l.createElement("div",{className:"reports__content"},l.createElement(c.DesktopWrapper,null,l.createElement(c.DataTable,{className:"statement",columns:z,content_loader:m.Ro,data_source:r,getRowAction:function(e){return ze(e)},getRowSize:function(){return 63},onScroll:g,passthrough:{isTopUp:function(e){return N&&"Deposit"===e.action}}},l.createElement(R,{is_loading:E}))),l.createElement(c.MobileWrapper,null,l.createElement(c.DataList,{className:"statement",data_source:r,getRowAction:ze,onScroll:g,rowRenderer:function(e){var t=e.row,n=e.passthrough;return l.createElement(l.Fragment,null,l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:D.icon,passthrough:n}),l.createElement(c.DataList.Cell,{row:t,column:D.action_type,passthrough:n})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:D.refid}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:D.currency})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:D.date}),l.createElement(c.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:D.amount})),l.createElement("div",{className:"data-list__row"},l.createElement(c.DataList.Cell,{row:t,column:D.balance})))},row_gap:8,passthrough:{isTopUp:function(e){return N&&"Deposit"===e.action}}},l.createElement(R,{is_loading:E}))))))};De.propTypes={action_type:r().string,account_statistics:r().object,component_icon:r().string,currency:r().string,data:o.PropTypes.arrayOrObservableArray,date_from:r().number,date_to:r().number,error:r().string,filtered_date_range:r().object,handleDateChange:r().func,handleFilterChange:r().func,handleScroll:r().func,has_selected_date:r().bool,is_empty:r().bool,is_loading:r().bool,is_mx_mlt:r().bool,is_switching:r().bool,is_virtual:r().bool,onMount:r().func,onUnmount:r().func};const Te=(0,g.$j)((function(e){var t=e.modules,n=e.client;return{action_type:t.statement.action_type,account_statistics:t.statement.account_statistics,currency:n.currency,data:t.statement.data,date_from:t.statement.date_from,date_to:t.statement.date_to,error:t.statement.error,filtered_date_range:t.statement.filtered_date_range,handleDateChange:t.statement.handleDateChange,handleFilterChange:t.statement.handleFilterChange,handleScroll:t.statement.handleScroll,has_selected_date:t.statement.has_selected_date,is_empty:t.statement.is_empty,is_loading:t.statement.is_loading,is_mx_mlt:n.standpoint.iom||n.standpoint.malta,is_switching:n.is_switching,is_virtual:n.is_virtual,onMount:t.statement.onMount,onUnmount:t.statement.onUnmount}}))((0,i.withRouter)(De));var je=function(e){var t=e.history,n=e.is_logged_in,o=e.is_logging_in,a=e.is_visible,r=e.location,i=e.routeBackInApp,m=e.routes,_=e.setTabIndex,d=e.setVisibilityRealityCheck,p=e.tab_index,f=e.toggleReports;l.useEffect((function(){return f(!0),function(){d(1),f(!1)}}),[]);var y=function(){var e=[];return m.forEach((function(t){e.push({default:t.default,icon:t.icon_component,label:t.getTitle(),value:t.component,path:t.path})})),e},v=(0,s.getSelectedRoute)({routes:m,pathname:r.pathname});return!n&&o?l.createElement(c.Loading,{is_fullscreen:!0}):l.createElement(c.FadeWrapper,{is_visible:a,className:"reports-page-wrapper",keyname:"reports-page-wrapper"},l.createElement("div",{className:"reports"},l.createElement(c.PageOverlay,{header:(0,u.localize)("Reports"),onClickClose:function(){return i(t)}},l.createElement(c.DesktopWrapper,null,l.createElement(c.VerticalTab,{alignment:"center",id:"report",is_floating:!0,classNameHeader:"reports__tab-header",current_path:r.pathname,is_routed:!0,is_full_width:!0,setVerticalTabIndex:_,vertical_tab_index:v.default?0:p,list:y()})),l.createElement(c.MobileWrapper,null,l.createElement(c.Div100vhContainer,{className:"reports__mobile-wrapper",height_offset:"80px"},l.createElement(c.SelectNative,{className:"reports__route-selection",list_items:y().map((function(e){return{text:e.label,value:e.path}})),value:v.path,should_show_empty_option:!1,onChange:function(e){return t.push(e.target.value)}}),v&&l.createElement(v.component,{component_icon:v.icon_component}))))))};je.propTypes={history:r().object,is_logged_in:r().bool,is_logging_in:r().bool,is_visible:r().bool,location:r().object,routeBackInApp:r().func,routes:r().arrayOf(r().object),setTabIndex:r().func,setVisibilityRealityCheck:r().func,tab_index:r().number,toggleReports:r().func};const Se={OpenPositions:G,ProfitTable:Ce,Statement:Te,Reports:(0,g.$j)((function(e){var t=e.client,n=e.common,o=e.ui;return{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_visible:o.is_reports_visible,routeBackInApp:n.routeBackInApp,setVisibilityRealityCheck:t.setVisibilityRealityCheck,setTabIndex:o.setReportsTabIndex,tab_index:o.reports_route_tab_index,toggleReports:o.toggleReports}}))((0,i.withRouter)(je))}},"./templates/_common/components/loading.jsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n("../../../node_modules/classnames/index.js"),a=n.n(o),r=n("react");const l=function(e){var t=e.className,n=e.is_invisible,o=e.theme,l=e.id;return r.createElement("div",{id:l,className:a()("barspinner","barspinner--".concat(o||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return r.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);